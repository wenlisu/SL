<section class="dx-list-default">
  <div class="dx-operation-bar">
    <form class="layui-form">

      <div class="layui-form-item">
        <div class="layui-input-inline">
          <input type="tel" name="username" lay-verify="username" placeholder="请输入角色名称" autocomplete="off"
                 class="layui-input">
        </div>
      </div>

      <div class="layui-form-item">
        <div class="layui-inline">
          <div class="layui-input-block">
            <input type="text" name="startTime" id="startTime" placeholder="请选择时间" autocomplete="off"
                   class="layui-input">
          </div>
        </div>
        至&nbsp;&nbsp;
        <div class="layui-inline">
          <div class="layui-input-block">
            <input type="text" name="endTime" id="endTime" placeholder="请选择时间" autocomplete="off"
                   class="layui-input">
          </div>
        </div>
      </div>

      <div class="layui-form-item">
        <div class="layui-input-block">
          <button class="layui-btn btn-yellow" lay-submit="" lay-filter="search">查询</button>
        </div>
      </div>

    </form>
    <div class="layui-form-item item-right">
      <div class="layui-input-block">
        <button class="layui-btn btn-simple-blue layui-btn-primary" id="add" dx-type="add" style="font-weight: bold">
          <i class="iconfont icon-jia"></i>新增
        </button>
      </div>
    </div>
  </div>

  <table class="layui-table">
    <thead>
    <tr>
      <th>角色名称</th>
      <th>填写人</th>
      <th>填写时间</th>
      <th class="table-operation-box">操作</th>
    </tr>
    </thead>
    <tbody>
    <tr>
      <td>客服</td>
      <td>超级管理员</td>
      <td>2016-11-11</td>
      <td class="table-operation-box">
        <span class="table-operation user-info" dx-type="info"><i class="iconfont icon-chakan"></i></span>
        <span class="table-operation user-update" dx-type="update"><i class="iconfont icon-xiugai"></i></span>
        <span class="table-operation user-delete"><i class="layui-icon">&#xe640;</i></span>
      </td>
    </tr>
    <tr>
      <td>客服</td>
      <td>超级管理员</td>
      <td>2016-11-11</td>
      <td class="table-operation-box">
        <span class="table-operation user-info" dx-type="info"><i class="iconfont icon-chakan"></i></span>
        <span class="table-operation user-update" dx-type="update"><i class="iconfont icon-xiugai"></i></span>
        <span class="table-operation user-delete"><i class="layui-icon">&#xe640;</i></span>
      </td>
    </tr>
    <tr>
      <td>客服</td>
      <td>超级管理员</td>
      <td>2016-11-11</td>
      <td class="table-operation-box">
        <span class="table-operation user-info" dx-type="info"><i class="iconfont icon-chakan"></i></span>
        <span class="table-operation user-update" dx-type="update"><i class="iconfont icon-xiugai"></i></span>
        <span class="table-operation user-delete"><i class="layui-icon">&#xe640;</i></span>
      </td>
    </tr>
    <tr>
      <td>客服</td>
      <td>超级管理员</td>
      <td>2016-11-11</td>
      <td class="table-operation-box">
        <span class="table-operation user-info" dx-type="info"><i class="iconfont icon-chakan"></i></span>
        <span class="table-operation user-update" dx-type="update"><i class="iconfont icon-xiugai"></i></span>
        <span class="table-operation user-delete"><i class="layui-icon">&#xe640;</i></span>
      </td>
    </tr>
    <tr>
      <td>客服</td>
      <td>超级管理员</td>
      <td>2016-11-11</td>
      <td class="table-operation-box">
        <span class="table-operation user-info" dx-type="info"><i class="iconfont icon-chakan"></i></span>
        <span class="table-operation user-update" dx-type="update"><i class="iconfont icon-xiugai"></i></span>
        <span class="table-operation user-delete"><i class="layui-icon">&#xe640;</i></span>
      </td>
    </tr>
    <tr>
      <td>客服</td>
      <td>超级管理员</td>
      <td>2016-11-11</td>
      <td class="table-operation-box">
        <span class="table-operation user-info" dx-type="info"><i class="iconfont icon-chakan"></i></span>
        <span class="table-operation user-update" dx-type="update"><i class="iconfont icon-xiugai"></i></span>
        <span class="table-operation user-delete"><i class="layui-icon">&#xe640;</i></span>
      </td>
    </tr>
    <tr>
      <td>客服</td>
      <td>超级管理员</td>
      <td>2016-11-11</td>
      <td class="table-operation-box">
        <span class="table-operation user-info" dx-type="info"><i class="iconfont icon-chakan"></i></span>
        <span class="table-operation user-update" dx-type="update"><i class="iconfont icon-xiugai"></i></span>
        <span class="table-operation user-delete"><i class="layui-icon">&#xe640;</i></span>
      </td>
    </tr>
    <tr>
      <td>客服</td>
      <td>超级管理员</td>
      <td>2016-11-11</td>
      <td class="table-operation-box">
        <span class="table-operation user-info" dx-type="info"><i class="iconfont icon-chakan"></i></span>
        <span class="table-operation user-update" dx-type="update"><i class="iconfont icon-xiugai"></i></span>
        <span class="table-operation user-delete"><i class="layui-icon">&#xe640;</i></span>
      </td>
    </tr>
    <tr>
      <td>客服</td>
      <td>超级管理员</td>
      <td>2016-11-11</td>
      <td class="table-operation-box">
        <span class="table-operation user-info" dx-type="info"><i class="iconfont icon-chakan"></i></span>
        <span class="table-operation user-update" dx-type="update"><i class="iconfont icon-xiugai"></i></span>
        <span class="table-operation user-delete"><i class="layui-icon">&#xe640;</i></span>
      </td>
    </tr>
    <tr>
      <td>客服</td>
      <td>超级管理员</td>
      <td>2016-11-11</td>
      <td class="table-operation-box">
        <span class="table-operation user-info" dx-type="info"><i class="iconfont icon-chakan"></i></span>
        <span class="table-operation user-update" dx-type="update"><i class="iconfont icon-xiugai"></i></span>
        <span class="table-operation user-delete"><i class="layui-icon">&#xe640;</i></span>
      </td>
    </tr>
    </tbody>
  </table>

  <div id="dx-page-default" class="dx-page-default"></div>
</section>

<script type="text/javascript">

  layui.use(['form', 'laypage', '_route', 'laydate'], function () {
    var form = layui.form()
      , laypage = layui.laypage
      , _route = layui._route
      , layer = layui.layer
      , laydate = layui.laydate
      , startTime
      , endTime;

    // 监听时间选择
    startTime = {
      min: '1910-01-01 23:59:59',
      max: '2099-01-01 23:59:59',
      choose: function (datas) {
        endTime.min = datas; //开始日选好后，重置结束日的最小日期
        endTime.start = datas; //将结束日的初始值设定为开始日
      }
    };

    endTime = {
      min: '1910-01-01 23:59:59',
      max: '2099-01-01 23:59:59',
      choose: function (datas) {
        startTime.max = datas; //结束日选好后，重置开始日的最大日期
      }
    };

    $('#startTime').on('click', function () {
      startTime.elem = this;
      laydate(startTime);
    });

    $('#endTime').on('click', function () {
      endTime.elem = this;
      laydate(endTime);
    });

    // 初始化当前位置
    _route.setBreadcrumb(['后台用户管理', '后台角色']);

    // 渲染表单
    form.render();

    // 自定义验证规则
    form.verify({
      username: function (value) {
        if (value.length > 20) {
          return '用户名称过长，请重新输入';
        }
      },
      phone: function (value) {
        if (value && (value.length > 11 || value.length < 6)) {
          return '请输入正确的联系方式';
        }
      }
    });

    // 分页初始化
    laypage({
      cont: 'dx-page-default'
      , pages: 20
      , first: 1
      , jump: function (data) {
        layer.msg('显示第' + data.curr + '页');
      }
    });


    // 监听增加按钮
    $('#add,.user-info,.user-update').on('click', function () {
      _route.go('backstage.role.info', {type: $(this).attr('dx-type')});
    });


    // 监听禁用按钮
    $('.user-delete').on('click', function () {
      layer.confirm('确定删除此角色？', {
        btn: ['确定', '取消']
      }, function (index, layero) {
        layer.msg('删除了')
      });
    });


    // 监听提交按钮
    form.on('submit(search)', function (data) {
      layer.alert(JSON.stringify(data.field), {
        title: '最终的提交信息'
      });
      return false;
    });

  });
</script>